<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml"
            fx:controller="com.finbasics.controller.RiskAssessmentController"
            stylesheets="@/css/glass.css" style="-fx-background-color:#f4f6f8; -fx-font-family:'Segoe UI';">

    <top>
        <HBox spacing="20" alignment="CENTER_LEFT" style="-fx-background-color:#2c3e50; -fx-padding:15 25;">
            <Button text="&#8592; Back to Analysis" onAction="#goBack" style="-fx-background-color:rgba(255,255,255,0.1); -fx-text-fill:white; -fx-cursor:hand;"/>
            <Label text="Underwriting Risk Assessment" style="-fx-text-fill:white; -fx-font-weight:bold; -fx-font-size:16;"/>
        </HBox>
    </top>

    <center>
        <HBox spacing="30" style="-fx-padding:30;">
            <VBox spacing="20" prefWidth="320">
                 <VBox styleClass="metric-card" spacing="15" style="-fx-padding:20;">
                    <HBox alignment="CENTER_LEFT" spacing="15">
                        <Circle radius="25" fill="#bdc3c7"/>
                        <VBox>
                            <Label fx:id="lblBorrowerName" text="Borrower Name" style="-fx-font-weight:bold; -fx-font-size:14;"/>
                            <Label fx:id="lblAppNumber" text="APP-####" style="-fx-text-fill:#7f8c8d; -fx-font-size:12;"/>
                        </VBox>
                    </HBox>
                    <Separator/>
                    <VBox spacing="10">
                         <HBox alignment="CENTER_LEFT"><Label text="Product:" textFill="#7f8c8d" prefWidth="80"/><Label fx:id="lblProduct" text="-" style="-fx-font-weight:bold;"/></HBox>
                         <HBox alignment="CENTER_LEFT"><Label text="Amount:" textFill="#7f8c8d" prefWidth="80"/><Label fx:id="lblAmount" text="0" style="-fx-font-weight:bold;"/></HBox>
                    </VBox>
                </VBox>

                <VBox styleClass="metric-card" alignment="CENTER" style="-fx-padding: 30;">
                    <Label text="CREDIT TIER" styleClass="metric-title"/>
                    <Label fx:id="lblRiskGrade" text="..." style="-fx-font-size:32; -fx-font-weight:800; -fx-text-fill:#2c3e50;"/>
                    <Label fx:id="lblRecommendation" text="..." style="-fx-text-fill:#7f8c8d;" wrapText="true"/>
                </VBox>
            </VBox>

            <VBox spacing="15" HBox.hgrow="ALWAYS">
                <Label text="Risk Factor Analysis" style="-fx-font-size:18; -fx-font-weight:bold; -fx-text-fill:#2c3e50;"/>
                
                <ScrollPane fitToWidth="true" style="-fx-background-color:transparent; -fx-background:transparent;" VBox.vgrow="ALWAYS">
                     <VBox fx:id="factorsContainer" spacing="8" style="-fx-padding:5;"/>
                </ScrollPane>
                
                <Separator/>
                
                <VBox spacing="10">
                    <Label text="Underwriter Decision &amp; Conditions" style="-fx-font-weight:bold;"/>
                    <TextArea fx:id="txtComments" promptText="Enter final comments, specific conditions for approval, or reasons for decline..."
                              prefHeight="80" wrapText="true" style="-fx-border-color:#dcdde1; -fx-background-radius:4;"/>
                    
                    <HBox spacing="15" alignment="CENTER_RIGHT" style="-fx-padding: 10 0 0 0;">
                        <Button text="DECLINE" onAction="#submitDecline" prefWidth="120"
                                style="-fx-background-color:white; -fx-text-fill:#c0392b; -fx-font-weight:bold; -fx-border-color:#c0392b; -fx-border-radius:4; -fx-cursor:hand;"/>
                        <Button text="APPROVE w/ CONDITIONS" onAction="#submitCondition" prefWidth="180"
                                style="-fx-background-color:#f39c12; -fx-text-fill:white; -fx-font-weight:bold; -fx-background-radius:4; -fx-cursor:hand;"/>
                        <Button text="FINAL APPROVAL" onAction="#submitApprove" prefWidth="150"
                                style="-fx-background-color:#27ae60; -fx-text-fill:white; -fx-font-weight:bold; -fx-background-radius:4; -fx-cursor:hand;"/>
                    </HBox>
                </VBox>
            </VBox>
        </HBox>
    </center>
</BorderPane>